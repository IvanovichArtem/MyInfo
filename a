Для всего датасета были созданы два новых признака на основе координат объектов, чтобы учесть пространственные закономерности в распределении цен. Первый признак, geo_cluster_tree_dtr, формировался с помощью DecisionTreeRegressor с ограничением на количество листьев до пяти. Это позволяет разбить все объекты на несколько географически связанных кластеров, в которых значения цены внутри кластера максимально схожи. Второй признак, geo_cluster_rf, создавался с помощью RandomForestRegressor с таким же ограничением на листья, при этом индекс листа усреднялся по всем деревьям. Такой подход делает разбиение более устойчивым и сглаживает влияние случайных особенностей отдельных деревьев. В результате оба признака кодируют локальные пространственные зависимости и позволяют модели лучше учитывать влияние географического положения на цену, повышая точность предсказаний.
